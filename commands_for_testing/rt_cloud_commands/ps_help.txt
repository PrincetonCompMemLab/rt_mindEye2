


Single Terminal All Working:
PROJ_DIR=/Users/rosskempner/Desktop/Documents/Research/compmem/rt-cloud/projects/template

docker run -it --rm -p 8888:8888 -v ~/certs:/rt-cloud/certs -v $PROJ_DIR:/rt-cloud/projects/template -v /Users/rosskempner/Desktop/Documents/Research/compmem/rt-cloud/projects/template/outDir brainiak/rtcloud:latest scripts/data_analyser.sh -p template


Analysis listener in separate terminal working:

docker run -it --rm -p 8888:8888 -v ~/certs:/rt-cloud/certs -v $PROJ_DIR:/rt-cloud/projects/template -v $OUT_DIR:/rt-cloud/outDir brainiak/rtcloud:latest scripts/data_analyser.sh -p template --subjectRemote --test

WEB_IP=172.17.0.1

OUT_DIR="/Users/rosskempner/Desktop/Documents/Research/compmem/rt-cloud/projects/template/outDir"

docker run -it --rm --name listener -v ~/certs:/rt-cloud/certs -v $OUT_DIR:/rt-cloud/outDir brainiak/rtcloud:latest scripts/analysis_listener.sh -s $WEB_IP:8888 --test

docker run -it --rm -p 8888:8888 -v ~/certs:/rt-cloud/certs -v $PROJ_DIR:/rt-cloud/projects/template -v $OUT_DIR:/rt-cloud/outDir brainiak/rtcloud:latest scripts/data_analyser.sh -p template --subjectRemote -ip 172.17.0.1

docker run -it --rm --name listener -v ~/certs:/rt-cloud/certs -v $OUT_DIR:/rt-cloud/outDir brainiak/rtcloud:latest scripts/analysis_listener.sh -s $WEB_IP:8888 -u rosskempner



Next step: all three separate terminal on test! (Broken data streamer)


docker run -it --rm -p 8888:8888 -v ~/certs:/rt-cloud/certs -v $PROJ_DIR:/rt-cloud/projects/template brainiak/rtcloud:latest scripts/data_analyser.sh -p template --dataRemote --subjectRemote --test

docker run -it --rm --name listener -v ~/certs:/rt-cloud/certs -v $OUT_DIR:/rt-cloud/outDir brainiak/rtcloud:latest scripts/analysis_listener.sh -s $WEB_IP:8888 --test

DICOM_DIR="/Users/rosskempner/Desktop/Documents/Research/compmem/rt-cloud/projects/template/dicomDir"
WEB_IP=172.17.0.1

docker run -it --rm -v ~/certs:/rt-cloud/certs -v $DICOM_DIR:/rt-cloud/projects/template/dicomDir brainiak/rtcloud:latest scripts/data_streamer.sh -s $WEB_IP:8888 -d /rt-cloud,/tmp --test -> generates error "docker: Error response from daemon: driver failed programming external connectivity on endpoint sweet_gagarin (c255d1a0379a94378c1e4c5c2aa20efca11222a43661b4ec7d9850bc960d3d79): Bind for 0.0.0.0:8888 failed: port is already allocated."

_______________________
VM


Set up:

mv /Users/rosskempner/Downloads/rkempner-vm_key.pem /Users/rosskempner/.ssh 

chmod 400 ~/Downloads/rkempner-vm_key.pem

chmod 400 /Users/rosskempner/.ssh 

ssh -i ~/Downloads/rkempner-vm_key.pem azureuser@20.42.63.19

ssh -i ~/.ssh/rkempner-vm_key.pem azureuser@20.42.63.19

sudo usermod -aG docker rkempner

sudo usermod -a -G rtcloud rkempner

/Users/rosskempner/Desktop/Documents/Research/compmem/rt-cloud/projects/template

sudo chgrp -R rtcloud /home/rkempner/projects/template/

rkempner@20.84.97.38

scp -r /Users/rosskempner/certs rkempner@20.84.97.38:/home/rkempner

scp -r /Users/rosskempner/Desktop/Documents/Research/compmem/rt-cloud/docker/myDockerImage rkempner@20.84.97.38:/home/rkempner

scp -r /Users/rosskempner/Desktop/Documents/Research/compmem/MindEyeV2 rkempner@20.84.97.38:/home/rkempner/projects

scp -r /Users/rosskempner/Desktop/Documents/Research/compmem/MindEyeV2/mindeyev2/train_logs rkempner@20.84.97.38:/home/rkempner/projects/MindEyeV2/mindeyev2

scp coco_images_224_float16.hdf5 rkempner@20.84.97.38:/home/rkempner/projects/MindEyeV2/mindeyev2

scp -n /Users/rosskempner/Desktop/Documents/Research/compmem/MindEyeV2/mindeyev2 rkempner@20.84.97.38:/home/rkempner/projects/MindEyeV2/mindeyev2

scp zavychromaxl_v30.safetensors rkempner@20.84.97.38:/home/rkempner/projects/MindEyeV2/mindeyev2

scp README.md rkempner@20.84.97.38:/home/rkempner/projects/MindEyeV2/mindeyev2

scp test_73k_images.npy rkempner@20.84.97.38:/home/rkempner/projects/MindEyeV2/mindeyev2

scp shared1000.npy rkempner@20.84.97.38:/home/rkempner/projects/MindEyeV2/mindeyev2

scp subj01_annots.npy rkempner@20.84.97.38:/home/rkempner/projects/MindEyeV2/mindeyev2


README.md

test_73k_images.npy

shared1000.npy

subj01_annots.npy


Running template project:

sudo docker run -it --rm brainiak/rtcloud_root:1.1 scripts/run-projectInterface.sh -p sample --subjectRemote --dataRemote --test

sudo docker run -it --rm brainiak/rtcloud:latest

PROJ_DIR=/home/rkempner/projects/rt-cloud/projects/template

OUT_DIR=/home/rkempner/projects/rt-cloud/projects/template/outDir

IP=20.84.97.38

http://20.84.97.38:8888

ssh -L 8888:localhost:8888 rkempner@20.84.97.38


sudo docker run -it --rm -p 8888:8888 -v ~/certs:/rt-cloud/certs -v $PROJ_DIR:/rt-cloud/projects/template -v $OUT_DIR:/rt-cloud/outDir brainiak/rtcloud:latest


sudo docker run -it --rm -p 8888:8888 -v ~/certs:/rt-cloud/certs -v $PROJ_DIR:/rt-cloud/projects/template -v $OUT_DIR:/rt-cloud/outDir brainiak/rtcloud:latest scripts/data_analyser.sh -p template --subjectRemote --test -ip $IP:8888

docker run -it --rm -p 8888:8888 -v ~/certs:/rt-cloud/certs -v $PROJ_DIR:/rt-cloud/projects/template -v $OUT_DIR:/rt-cloud/outDir brainiak/rtcloud:latest scripts/data_analyser.sh -p template --subjectRemote -ip 172.17.0.1

sudo docker run -it --rm -p 8888:8888 brainiak/rtcloud:latest scripts/run-projectInterface.sh -p sample --subjectRemote --dataRemote --test

Gus notes:
Ssh into cloud
Make 

ssh -XY rkempner@20.84.97.38 -L 8074:localhost:8074

sudo docker run -it --rm -p 8888:8074 -v ~/certs:/rt-cloud/certs -v $PROJ_DIR:/rt-cloud/projects/template -v $OUT_DIR:/rt-cloud/outDir brainiak/rtcloud:latest scripts/data_analyser.sh -p template --subjectRemote --test

bash scripts/data_analyser.sh --projectDir ~/rt-press/real-time -p template --port 8074 --subjectRemote --test

Take every dicom and train mind eye from scratch on

1) take pertained mindEye2 model

Jupiter
jupyter notebook --ip 20.84.97.38 --no-browser --allow-root


docker run -p 8888:8888 quay.io/jupyter/scipy-notebook:2024-01-15

docker run -p 8888:8888 jupyter_stacks_plus_mindeye


http://20.84.97.38:8888/?token=c64458fbfe4915df3fc9975ce708fd8cbbca44b2123abe87